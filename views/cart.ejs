<!DOCTYPE html>
<html>
<head>
  <title>My Cart</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<%- include('partials/navbar', { user: user }) %>

<h2>ðŸ›’ My Cart</h2>

<% if (items.length === 0) { %>
  <p style="text-align: center;">Your cart is empty.</p>
<% } else { %>
  <table style="width: 90%; margin: auto; text-align: left;">
    <tr>
      <th>Product</th><th>Price</th><th>Qty</th><th>Total</th><th>Remove</th>
    </tr>
    <% items.forEach(item => { %>
      <tr>
        <td><%= item.name %></td>
        <td>$<%= item.price.toFixed(2) %></td>
        <td><%= item.quantity %></td>
        <td>$<%= item.total.toFixed(2) %></td>
        <td>
          <form method="POST" action="/cart/remove/<%= item.id %>">
            <button type="submit" class="btn btn-danger">Remove</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </table>

  <h3 style="text-align: center;">ðŸ§¾ Total: $<%= totalAmount.toFixed(2) %></h3>
  <div style="text-align: center;">
    <a href="/checkout" class="btn">Proceed to Checkout</a>
  </div>
<% } %>
</body>
</html>
